-- Create Tables
CREATE TABLE IF NOT EXISTS BRANDS(
    ID BIGINT AUTO_INCREMENT,
    NAME VARCHAR(20) NOT NULL,
    PRIMARY KEY(ID)
);

CREATE TABLE IF NOT EXISTS PRODUCTS(
    ID BIGINT AUTO_INCREMENT,
    NAME VARCHAR(20) NOT NULL,
    DESCRIPTION VARCHAR(256),
    PRIMARY KEY(ID)
);

CREATE TABLE IF NOT EXISTS PRICES (
    BRAND_ID BIGINT NOT NULL COMMENT 'FK BRAND FROM THE GROUP',
    START_DATE TIMESTAMP NOT NULL COMMENT 'Date of valid price start',
    END_DATE TIMESTAMP NOT NULL COMMENT 'Date of valid price end',
    PRICE_LIST BIGINT AUTO_INCREMENT COMMENT 'Identifier of the price',
    PRODUCT_ID BIGINT NOT NULL COMMENT 'Date of valid price end',
    PRIORITY INT NOT NULL COMMENT 'Priority if more that one price match in time, apply the higher priority price',
    PRICE DECIMAL(10,2) NOT NULL COMMENT 'Selling price',
    CURR VARCHAR(3) NOT NULL  COMMENT 'iso of the Currency',
    PRIMARY KEY (PRICE_LIST),
    CONSTRAINT FK_BRAND_ID FOREIGN KEY (BRAND_ID) REFERENCES BRANDS(ID),
    CONSTRAINT FK_PRODUCT_ID FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(ID)
);

-- Insert data
INSERT INTO BRANDS (NAME) VALUES ('ZARA');

INSERT INTO PRODUCTS(ID, NAME, DESCRIPTION) VALUES (35455, 'Producto 35455', 'Descripci√≥n producto 35455');

INSERT INTO PRICES (BRAND_ID, START_DATE, END_DATE, PRODUCT_ID, PRIORITY, PRICE, CURR)
VALUES
(1, '2020-06-14 00:00:00', '2020-12-31 23:59:59', 35455, 0, 35.50, 'EUR'),
(1, '2020-06-14 15:00:00', '2020-06-14 18:30:00', 35455, 1, 25.45, 'EUR'),
(1, '2020-06-15 00:00:00', '2020-06-15 11:00:00', 35455, 1, 30.50, 'EUR'),
(1, '2020-06-15 16:00:00', '2020-12-31 23:59:59', 35455, 1, 38.95, 'EUR');